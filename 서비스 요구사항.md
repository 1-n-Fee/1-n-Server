# 서비스 요구사항 - ver.220713



## 편집 이력

- Init - 20220704
- 채팅, 제안서 히스토리 등 수정 - 20220713







## 1. 회원 정보 관리

### 1. 회원가입

####   1-1 일반 회원

- 건국대 메일(`@konkuk.ac.kr`)로 학생 인증 필요

- 아이디 : 건국대 메일 인증시 사용했던 아이디 사용
- 비밀번호 : 8자 이상 15자 이하, 영문자 숫자 특수문자 모두 포함해야함
- 비밀번호 확인 : 비밀번호와 동일해야함 -> 클라이언트단 검증
- 닉네임 : 2자 이상 8자 이하, 중복검사필요, 공백 허용 안함
- 이름 : 실명, 공백 허용 안함

* 전화번호 : [   ]-[   ]-[   ]
* 선택 입력 사항 : 학과, 성별



####   1-2 사장님

- 아이디: 3자 이상 10자 이하, 공백금지, 특수문자 금지, 중복 검사 필요
- 비밀번호: 8자 이상 15자 이하, 영문자 숫자 특수문자 모두 포함해야함
- 비밀번호 확인 : 비밀번호와 동일해야함
- 이름 : 실명, 공백 허용 안함
- 가게 이름

* 가게 전화번호 : [   ]-[   ]-[   ]
* 사장님 전화번호 : [   ]-[   ]-[   ]
* 매장 위치(주소)
* 사업자 등록번호



### 2. 로그인

- 일반 로그인: 아이디, 비밀번호
- oAuth2 : 카카오, 네이버, 구글 연동 로그인 가능



### 3. 로그아웃



### 4. 아이디/비밀번호 찾기

 - 아이디 찾기: 이름 & 전화번호 입력 -> 화면에서 보여주기

- 비밀번호 찾기: 아이디(이메일) & 이름 & 전화번호  -> 건국 이메일로 임시비밀번호 전송





### 5. 회원 정보 변경

 - 비밀번호 변경 : 기존 비밀번호와 동일한 경우 변경 불가, 정책은 회원가입시와 동일
 - 닉네임, 학과, 성별 변경 가능, 정책은 회원가입시와 동일









## 2. 업체 등록

### 1. 음식점 사장님이 본인 가게에 한정해 음식 등록

- 매장 전화번호, 위치는 회원가입시 기입했던 정보로 사용. 별도로 수정 불가
- 메뉴 사진, 메뉴 이름, 메뉴 가격, 배달비, 영업 시간은 정보 입력 필요

### 2. 서비스 관리자가 수동으로 매장 및 음식 등록

- 매장 전화번호, 위치, 메뉴 사진, 메뉴 이름, 메뉴 가격, 배달비, 영업 시간 입력 필요
- 별도의 서비스 관리자 페이지가 필요할 듯 함 -> 추후 제작

### 3. 방장이 음식점에 대한 정보 수동 입력

- 서비스에 등록되어 있지 않는 음식점을 이용할 시, 게시물 작성시 방장이 수동으로 설정 가능







## 3. 지도를 이용한 게시물 모여주기

- 지정된 위치에만 게시물 등록 가능(배달존)
- 해당 위치를 클릭(터치)하면 그 장소에 등록된 공동 구매 리스트를 볼 수 있음
- 공동 구매 리스트에는 음식점 이름, 참여 마감 시간, 현재 참여자 수, 최대 참여 가능 인원 수, 방장 닉네임 확인 가능
- 해당 게시물을 한번더 클릭(터치)하면 상세 보기 가능
  - 상세 보기에는 음식 종류, 설명 텍스트(300자)를 확인 가능

- 검색으로 음식점을 찾을 수 있으며, 음식 종류 필터(한식, 중식, 양식, 분식, 카페, 야식, 기타) 가능
- 참여자가 공동 구매에 참여하기 위해서는 메뉴와 수량을 입력 후 방장에게 제안서를 수락받아야 함
- 배달 스팟(장소)의 위도/경도는 프론트에 저장. 위치마다 고유 id, 이름 등 부여 - `0713 추가`
- 구매에 대한 질문 등을 할 수 있는 댓글 기능 제공 - `0713 추가`





## 4. 공동 구매 과정

1. 게시물 리스트 또는 상세 보기 페이지에서 '참여하기' 버튼 클릭
2. 주문할 메뉴와 수량 선택 후 방장에게 제안서 보내기, ~~이때 방장의 닉네임을 클릭하여 1:1 채팅이 가능하다.~~ - `0713 수정`
3. 방장은 해당 제안서 확인 후 수락 or 거절하기
4. 모집 마감이 된 경우, 참여하는 사람들을 대상으로 자동으로 단체 채팅방이 만들어짐
5. 참여자들의 제안서를 바탕으로 방장이 주문하기
6. 배달 완료 후 방장이 '배달 확정'을 누르면 채팅방 비활성화됨.





## 5. 채팅

- 1:1 채팅 기능 미지원 - `0713 수정`
- 단체 채팅방은 공동 구매 그룹에 대해서만 만들어지며, ~~주문 완료 전까지는 '그룹 나가기(채팅방 나가기)'가 자유로움~~. 방장의 제안서 수락 시 방 나가기 불가능- `0713 수정`
- 방장이 주문 후 '주문 완료'를 선택한 경우, 그룹 채팅방에서는 못 나감.
- 이후 방장이 '배달 확정'를 선택한 경우, 그룹 채팅방에서 나갈 수 있음.
- 채팅방을 나간경우, 자동으로 본인의 채팅 목록에서 삭제됨
- 채팅방을 나갈 수 없는 상황, 예를 들어 주문완료~배달확정 사이, 에서는 채팅방 삭제 불가능
- 현재 채팅 기록은 모두 RDB에 저장. 이후 개발 상황을 고려해 Nosql 또는 로컬 스토리지에 저장하는 걸로 변경 - `0713 추가`





## 6. 제안서 히스토리 - `0713 추가`

- 마이페이지에서 사용자가 보낸 제안서의 목록 확인 가능
- 제안서 보낸 게시물 이름은 `음식점 이름+게시물id` 형식
- 사용자가 제안한 음식(이름), 수량, 가격 확인 가능
- 현재 확정된 공동 구매 인원을 토대로 1인당 배달비 출력, 음식 가격과 합해서 총 가격도 확인 가능
- 현재 진행 상태 확인 가능(검토 중, 수락, 거절, 주문 완료, 배달 완료)
- 방장이 제안서 수락 이전에는 제안서 취소 가능 -> 취소하기 버튼 활성화





## 7. 알림(소켓 통신?) - `0713 추가`

- 방장의 경우 제안서가 들어왔을 경우 알림 발생
- 유저가 제안서를 보낸 후, 방장의 수락 또는 거절 이벤트가 생기면 알림 발생

- 채팅방 알림
